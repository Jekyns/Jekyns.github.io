(this["webpackJsonpsendsay-exercise"]=this["webpackJsonpsendsay-exercise"]||[]).push([[0],{15:function(e,t,a){},17:function(e,t,a){e.exports=a.p+"static/media/logo.9dd36fc1.svg"},18:function(e,t,a){e.exports=a.p+"static/media/Spinner.983a8344.gif"},19:function(e,t,a){e.exports=a.p+"static/media/small_logo.b920aea8.svg"},20:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAeAAAAHgB6vJq9gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADiSURBVDiNndExa9NhFMXh50RJnQVd281OopZsHdu9pZNIPoBLv5Wz+gFcXBxKK4hLKziXLO3U9bgkJGCb8O+BwwuX9/449960lWQHpzjBlqXu8K7trYfUFn5ginFbQwwTfB3auPAIe/j5YMQNGg35nOR5ku1HA/AC35O8eRSg7SU+4HOS1/D0nphH2N3A+oVvSSZDR1jVE4z+S9D2y7quJPv4iIO2f4de4RU+4bjtBffsYINucNj2alEYBGg7w2y1NsI53g5MsgS0PcPLJNMk48GA+ft+nuJPkusV/07ybB3gHxQVhwNMj7/XAAAAAElFTkSuQmCC"},22:function(e,t,a){e.exports=a(38)},27:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),c=a.n(s),i=(a(27),a(3)),l=a(1),o=a(2),u=a.n(o),m=a(5),d=a.n(m),p="SET_USER/User",_="DELETE_USER/User",h="ADD_REQUEST/RequestHisory",f="DELETE_REQUEST/RequestHisory",v="SET_HISTORY/RequestHisory";function g(e){return{type:p,user:e}}function b(e){return{type:_,user:e}}function E(e){return{type:h,request:e}}function N(e){return{type:v,history:e}}var w=a(7),y=a.n(w),k=a(4),S=a(10);a(15);function A(e){var t=e.title,a=e.type,n=e.required,s=e.name,c=e.onChange,i=e.value,l=e.error,o="label__head-title ".concat(l?"errorText":null),u="label__input-input ".concat(l?"errorInput":null);return r.a.createElement("label",{className:"inputs__label"},r.a.createElement("div",{className:"label__head"},r.a.createElement("span",{className:o},t),n?null:r.a.createElement("span",{className:"label__head-optional"},"\u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e")),r.a.createElement("div",{className:"label__input"},r.a.createElement("input",{className:u,type:a,value:i,name:s,onChange:c})))}A.defaultProps={title:"",name:"",value:"",error:!1,required:!1,type:"text"};var x=a(17),O=a.n(x),q=a(18),j=a.n(q);var C={setUser:g},D=Object(i.b)(void 0,C)((function(e){var t=r.a.useState(""),a=Object(l.a)(t,2),n=a[0],s=a[1],c=r.a.useState(""),i=Object(l.a)(c,2),o=i[0],m=i[1],p=r.a.useState(""),_=Object(l.a)(p,2),h=_[0],f=_[1],v=r.a.useState(!1),g=Object(l.a)(v,2),b=g[0],E=g[1],N=r.a.useState(""),w=Object(l.a)(N,2),x=w[0],q=w[1],C=r.a.useState(!1),D=Object(l.a)(C,2),H=D[0],J=D[1],R=r.a.useState(!1),U=Object(l.a)(R,2),B=U[0],M=U[1],L=function(e,t){if(!t)return!0;var a=e.exec(t);return!!a&&a[0].length===t.length},W=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"login":s(n),E(!L(/_*[a-z0-9A-Z]+_*[a-z0-9A-Z]*@*[a-zA-Z]*[.]*[a-z]*/g,n));break;case"sublogin":m(n);break;case"password":f(n),J(!L(/[^\u0430-\u044f\u0410-\u042f]*/g,n))}},T=function(){var t=Object(S.a)(y.a.mark((function t(a){var r,s,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),q(""),n||E(!0),h){t.next=6;break}return J(!0),t.abrupt("return",null);case 6:if(!b&&!H){t.next=8;break}return t.abrupt("return",null);case 8:if(!n||!h){t.next=26;break}return M(!0),r=new d.a,t.prev=11,t.next=14,r.request({action:"login",login:n,sublogin:o,passwd:h});case 14:s=t.sent,u.a.save("sendsay_session",s.session),e.setUser({login:s.login,sublogin:s.sublogin,session:s.session}),t.next=25;break;case 19:t.prev=19,t.t0=t.catch(11),delete(c=Object(k.a)({},t.t0)).request,q(JSON.stringify(c)),f("");case 25:M(!1);case 26:case"end":return t.stop()}}),t,null,[[11,19]])})));return function(e){return t.apply(this,arguments)}}(),V="submit__btn-span ".concat(B?"hide-text":null),P="submit__btn-loader ".concat(B?"show-loader":null),F="head__error ".concat(x?"show-error":null);return r.a.createElement("div",{className:"wrapper login-wrapper"},r.a.createElement("object",{className:"wrapper__logo-svg",type:"image/svg+xml",data:O.a}),r.a.createElement("div",{className:"wrapper__login"},r.a.createElement("form",{className:"wrapper__login-form",onSubmit:T},r.a.createElement("div",{className:"form__head"},r.a.createElement("div",{className:"head__title"},r.a.createElement("h1",{className:"head__title-h1"},"API-\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043a\u0430")),r.a.createElement("div",{className:F},r.a.createElement("div",{className:"error__head"},r.a.createElement("div",{className:"error__head-face"},r.a.createElement("div",{className:"head__face-eye left-eye"}),r.a.createElement("div",{className:"head__face-eye right-eye"}),r.a.createElement("div",{className:"head__face-mouth"})),r.a.createElement("span",{className:"error__head-span"},"\u0412\u0445\u043e\u0434 \u043d\u0435 \u0432\u044b\u0448\u0435\u043b")),r.a.createElement("div",{className:"error__message"},r.a.createElement("span",{className:"error__message-span"},x)))),r.a.createElement("div",{className:"form__inputs"},r.a.createElement(A,{onChange:W,error:b,value:n,name:"login",title:"\u041b\u043e\u0433\u0438\u043d",required:!0}),r.a.createElement(A,{onChange:W,value:o,name:"sublogin",title:"\u0421\u0443\u0431\u043b\u043e\u0433\u0438\u043d"}),r.a.createElement(A,{onChange:W,error:H,value:h,name:"password",title:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",required:!0})),r.a.createElement("div",{className:"form__submit"},r.a.createElement("button",{type:"submit",className:"form__submit-btn"},r.a.createElement("span",{className:V},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("img",{alt:"spinner",className:P,src:j.a}))))),r.a.createElement("a",{href:"https://github.com/Jekyns/sendsay-exercise",className:"wrapper__link"},r.a.createElement("span",{href:"https://github.com/Jekyns/sendsay-exercise",className:"wrapper__link-visible"},"@Jekyns"),r.a.createElement("span",{className:"wrapper__link-typing"},"/sendsay-exercise")))})),H=a(19),J=a.n(H),R=a(20),U=a.n(R);var B={deleteUser:b},M=Object(i.b)(void 0,B)((function(e){return r.a.createElement("button",{className:"logout",onClick:function(){e.deleteUser(),u.a.remove("sendsay_session"),new d.a({}).request({action:"logout",session:u.a.load("sendsay_session")})}},r.a.createElement("span",{className:"logout-span"},"\u0412\u044b\u0439\u0442\u0438"),r.a.createElement("img",{alt:"logout icon",className:"logout-img",src:U.a}))}));var L=Object(i.b)((function(e){return{user:e.userStore.user}}),void 0)((function(e){var t=e.user,a=e.toogleFullScreen,n=e.isFullscreen;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__left"},r.a.createElement("div",{className:"header__left-logo"},r.a.createElement("object",{className:"header__logo-svg",type:"image/svg+xml",data:J.a})),r.a.createElement("div",{className:"header__left-name"},r.a.createElement("span",{className:"header__left-span"},"API-\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043a\u0430"))),r.a.createElement("div",{className:"header__right"},r.a.createElement("div",{className:"header__right-item header__right-user"},r.a.createElement("span",{className:"user-item header__right-login"},t.login),t.login===t.sublogin?"":r.a.createElement("span",{className:"user-item header__right-sublogin"},t.sublogin)),r.a.createElement("div",{className:"header__right-item header__right-logout"},r.a.createElement(M,null)),r.a.createElement("div",{className:"header__right-item right__fullscreen"},r.a.createElement("button",{className:"right__fullscreen-button",onClick:a},n?r.a.createElement("svg",{className:"right__fullscreen-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M1 6H4C4.53043 6 5.03914 5.78929 5.41421 5.41421C5.78929 5.03914 6 4.53043 6 4V1M14 1V4C14 4.53043 14.2107 5.03914 14.5858 5.41421C14.9609 5.78929 15.4696 6 16 6H19M19 14H16C15.4696 14 14.9609 14.2107 14.5858 14.5858C14.2107 14.9609 14 15.4696 14 16V19M6 19V16C6 15.4696 5.78929 14.9609 5.41421 14.5858C5.03914 14.2107 4.53043 14 4 14H1",stroke:"#0D0D0D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"right__fullscreen-icon-path"})):r.a.createElement("svg",{className:"right__fullscreen-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M6 1H3C2.46957 1 1.96086 1.21071 1.58579 1.58579C1.21071 1.96086 1 2.46957 1 3V6M19 6V3C19 2.46957 18.7893 1.96086 18.4142 1.58579C18.0391 1.21071 17.5304 1 17 1H14M14 19H17C17.5304 19 18.0391 18.7893 18.4142 18.4142C18.7893 18.0391 19 17.5304 19 17V14M1 14V17C1 17.5304 1.21071 18.0391 1.58579 18.4142C1.96086 18.7893 2.46957 19 3 19H6",stroke:"#0D0D0D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"right__fullscreen-icon-path"}))))))}));a(8);function W(e){var t=r.a.useState(!1),a=Object(l.a)(t,2),n=a[0],s=a[1],c=r.a.useState(!1),i=Object(l.a)(c,2),o=i[0],u=i[1],m=function(){s(!n)},d=e.actionName,p=e.requestJson,_=e.success,h=e.tabExecute,f=e.tabDelete;return r.a.createElement("div",{className:"requests__request"},r.a.createElement("div",{className:"request__tab",onClick:m},r.a.createElement("div",{className:"tab__success"},r.a.createElement("div",{className:"tab__success-lamp ".concat(_?"success":"failed")})),r.a.createElement("div",{className:"tab__title ".concat(o?"copied-show":"copied-hide")},r.a.createElement("span",{className:"tab__title-span",title:d},d)),r.a.createElement("div",{className:"tab__dropdown-icon"},r.a.createElement("div",{className:"tab__dropdown-dots"}))),r.a.createElement("div",{className:"tab__dropdown ".concat(n?"open-dropdown":"")},r.a.createElement("ul",{className:"dropdown__list"},r.a.createElement("li",{className:"dropdown__list-li",onClick:function(){h(p),m()}},r.a.createElement("span",{className:"dropdown__list-span"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c")),r.a.createElement("li",{className:"dropdown__list-li dropdown__list-copy",onClick:function(){u(!0),m(),setTimeout((function(){u(!1)}),500),navigator.clipboard.writeText(p)}},r.a.createElement("span",{className:"dropdown__list-span"},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement("li",{className:"dropdown__list-li dropdown__list-delete",onClick:function(){f(d),m()}},r.a.createElement("span",{className:"dropdown__list-span dropdown-delete-span"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))))}var T=W;function V(e){var t=r.a.createRef(),a=r.a.useState(0),n=Object(l.a)(a,2),s=n[0],c=n[1],i=e.hide,o=e.clearHistory,u={right:"".concat(s,"px")};return r.a.createElement("div",{className:"history ".concat(i?"hide-history":""),onWheel:function(e){var a=t.current.clientWidth;if(e.deltaY>0){if(window.innerWidth+s>=a)return null}else if(s<=0)return null;return window.innerWidth+s+.5*e.deltaY>a?(c(a-window.innerWidth),null):s+.5*e.deltaY<0?(c(0),null):(c(s+.5*e.deltaY),null)}},r.a.createElement("div",{className:"history__requests",style:u,ref:t},function(){var t=e.requests,a=e.tabExecute,n=e.tabDelete,s=[];return t.forEach((function(e){s.push(r.a.createElement(T,{actionName:e.actionName,requestJson:e.requestJson,success:e.success,tabExecute:a,tabDelete:n,key:e.actionName}))})),s}()),r.a.createElement("div",{className:"history__clear",onClick:o}))}W.defaultProps={actionName:"undefined",success:!1};var P=Object(i.b)((function(e){return{requests:e.historyStore.requests}}),void 0)(V);function F(e){var t=e.title,a=e.width,n=e.moveSplitter,s=e.text,c=e.onChange,i=e.name,l=e.error,o=e.disabled,u=e.savePosition,m={width:"".concat(a,"%"),WebkitTransition:"all",msTransition:"all"};return r.a.createElement("div",{className:"api__request",style:m,onMouseMove:n,onMouseUp:u},r.a.createElement("span",{className:"api__request-span"},t,": "),r.a.createElement("textarea",{className:"api__request-textarea ".concat(l?"textarea-error":""),value:s,onChange:c,name:i,disabled:o}))}V.defaultProps={hide:!0};var I=F;F.defaultProps={title:"Title",error:!1};var Y=function(e){var t=e.formatRequestText,a=e.onSubmit;return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footer__submit"},r.a.createElement("button",{className:"footer__submit-button",onClick:function(){a()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),r.a.createElement("a",{href:"https://github.com/Jekyns/sendsay-exercise",className:"wrapper__link"},r.a.createElement("span",{href:"https://github.com/Jekyns/sendsay-exercise",className:"wrapper__link-visible"},"@Jekyns"),r.a.createElement("span",{className:"wrapper__link-typing"},"/sendsay-exercise")),r.a.createElement("div",{className:"footer__beautify",onClick:t},r.a.createElement("button",{className:"footer__beautify-button"},r.a.createElement("div",{className:"beautify__button"},r.a.createElement("svg",{className:"beautify__button-svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{opacity:"0.8"},r.a.createElement("path",{d:"M21 10H7",stroke:"#0D0D0D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{d:"M11 6H3",stroke:"#0D0D0D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{d:"M12 14H7",stroke:"#0D0D0D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{d:"M7 18H3",stroke:"#0D0D0D",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))),r.a.createElement("span",{className:"beautify__button-span"},"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))};var Q={setUser:g,deleteUser:b,addRequest:E,deleteRequest:function(e){return{type:f,actionName:e}},setHistory:N},X=Object(i.b)((function(e){return{user:e.userStore.user,requests:e.historyStore.requests}}),Q)((function(e){var t=r.a.createRef(),a=r.a.useState(50),s=Object(l.a)(a,2),c=s[0],i=s[1],o=r.a.useState(50),m=Object(l.a)(o,2),p=m[0],_=m[1],h=r.a.useState(0),f=Object(l.a)(h,2),v=f[0],g=f[1],b=r.a.useState(!1),E=Object(l.a)(b,2),N=E[0],w=E[1],A=r.a.useState(""),x=Object(l.a)(A,2),O=x[0],q=x[1],j=r.a.useState(""),C=Object(l.a)(j,2),D=C[0],H=C[1],J=r.a.useState(!1),R=Object(l.a)(J,2),U=R[0],B=R[1],M=r.a.useState(!1),W=Object(l.a)(M,2),T=W[0],V=W[1],F=r.a.useState(!1),Q=Object(l.a)(F,2),X=Q[0],z=Q[1];Object(n.useEffect)((function(){if(u.a.load("splitter-position")){var e=u.a.load("splitter-position");i(e.requestBoxWidth),_(e.responseBoxWidth)}}),[]);var Z=function(e){return JSON.stringify(JSON.parse(e),null,2)},G=function(){var t=Object(S.a)(y.a.mark((function t(a){var n,r,s,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(V(!1),!U){t.next=3;break}return t.abrupt("return",null);case 3:return n=new d.a({}),r=a||O,s=JSON.parse(r),t.prev=6,t.next=9,n.request(Object(k.a)({session:u.a.load("sendsay_session")},s));case 9:c=t.sent,e.addRequest({actionName:s.action,requestJson:Z(r),success:!0}),H(Z(JSON.stringify(c))),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(6),e.addRequest({actionName:s.action,requestJson:Z(r),success:!1}),H(Z(JSON.stringify(t.t0))),V(!0);case 19:return q(r),t.abrupt("return",null);case 21:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e){return t.apply(this,arguments)}}(),K=function(e){if(!N)return!1;e.preventDefault();var t=v-e.clientX;return i(c-t/(window.innerWidth/100)),_(p+t/(window.innerWidth/100)),g(e.clientX),!0},$=function(){var e={requestBoxWidth:c,responseBoxWidth:p};u.a.save("splitter-position",JSON.stringify(e),{maxAge:1e3})},ee=e.requests,te={width:N?"25px":"15px"};return document.addEventListener("fullscreenchange",(function(){document.fullscreenElement?z(!0):z(!1)})),r.a.createElement("div",{className:"wrapper",onMouseUp:function(){w(!1)},ref:t},r.a.createElement(L,{toogleFullScreen:function(){X?document.exitFullscreen():t.current.requestFullscreen()},isFullscreen:X}),r.a.createElement(P,{hide:ee.length<=0,tabExecute:function(e){G(e)},tabDelete:function(t){(0,e.deleteRequest)(t)},clearHistory:function(){(0,e.setHistory)([]),u.a.remove("history")}}),r.a.createElement("div",{className:"api"},r.a.createElement(I,{error:U,title:"\u0417\u0430\u043f\u0440\u043e\u0441",width:c,moveSplitter:K,onChange:function(e){var t=e.target.value;q(t),B(t.length>0&&!function(t){try{JSON.parse(t)}catch(e){return!1}return!0}(t))},text:O,savePosition:$,name:"requestText"}),r.a.createElement("div",{className:"api__splitter",onMouseDown:function(e){g(e.clientX),w(!0),z(!1)},onMouseUp:$,style:te}),r.a.createElement(I,{error:T,title:"\u041e\u0442\u0432\u0435\u0442",width:p,moveSplitter:K,text:D,savePosition:$,name:"responseText"})),r.a.createElement(Y,{formatRequestText:function(){q(Z(O))},onSubmit:G}))}));a(37);var z={setUser:g,deleteUser:b,addRequest:E,setHistory:N},Z=Object(i.b)((function(e){return{user:e.userStore.user}}),z)((function(e){var t=r.a.useState(!1),a=Object(l.a)(t,2),s=a[0],c=a[1];return Object(n.useEffect)((function(){u.a.load("history")&&(0,e.setHistory)(u.a.load("history"));u.a.load("sendsay_session")&&(c(!0),new d.a({}).request({action:"pong",session:u.a.load("sendsay_session")}).then((function(t){var a={login:t.account,sublogin:t.sublogin};e.setUser(a),c(!1)})).catch((function(e){c(!1),console.log("authentication error",JSON.stringify(e))})))}),[]),r.a.createElement("div",{className:"App"},s?r.a.createElement("div",{className:"App__logo"},r.a.createElement("div",{className:"App__logo-circle"}),r.a.createElement("div",{className:"App__logo-square"}),r.a.createElement("div",{className:"App__logo-circle"}),r.a.createElement("svg",{className:"App__logo-parallelogram",width:"120",height:"120",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M15 0H30L15 30H0L15 0Z",fill:"black",fillOpacity:"0.2"}))):e.user.login?r.a.createElement(X,null):r.a.createElement(D,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(6),K=a(21),$={user:{login:"",sublogin:""}},ee=function(e){var t=$;return Object(k.a)(Object(k.a)({},e),{},{user:t})},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(k.a)(Object(k.a)({},e),{},{user:Object(k.a)(Object(k.a)({},e.user),t.user)});case _:return ee(e);default:return e}},ae={requests:[]},ne=function(e){u.a.save("history",JSON.stringify(e))},re=function(e,t){t.request.actionName||(t.request.actionName=t.request.requestJson);var a=e.requests.filter((function(e){return e.actionName!==t.request.actionName}));return a.length>=14&&a.splice(14,1),a.unshift(t.request),ne(a),{requests:a}},se=function(e,t){var a=e.requests.filter((function(e){return e.actionName!==t.actionName}));return ne(a),{requests:a}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return re(e,t);case f:return se(e,t);case v:return{requests:t.history};default:return e}},ie=Object(G.combineReducers)({userStore:te,historyStore:ce}),le=Object(G.createStore)(ie,Object(K.devToolsEnhancer)());c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:le},r.a.createElement(Z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,a){}},[[22,1,2]]]);
//# sourceMappingURL=main.2b1482e4.chunk.js.map